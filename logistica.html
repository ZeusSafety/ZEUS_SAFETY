<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Logística - ZEUS SAFETY</title>
    <!-- Favicon -->
  <link rel="icon" type="image/png" href="https://cibertecedgar.github.io/marcalogo/logozeus.png">
    <link rel="stylesheet" href="css/logistica.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
</head>

<body>
    <a href="menu.html" class="btn-back">Volver al Menú</a>

    <div class="container">
        <div class="header">
            <h1><i class="fas fa-truck"></i> LOGÍSTICA</h1>
            <p>Gestión de Incidencias Logísticas</p>
        </div>

        <!-- Secciones Primarias -->
        <div class="primary-sections">
            <!-- Sección Incidencias -->
            <div class="primary-section" id="incidencias-section">
                <div class="section-header" onclick="toggleSection('incidencias')">
                    <i class="fas fa-exclamation-triangle"></i>
                    <h2>Registrar Incidencias</h2>
                    <i class="fas fa-chevron-down toggle-icon"></i>
                </div>
                <div class="section-content" id="incidencias-content">
                    <div class="menu-grid">
                        <div class="menu-card">
                            <i class="fas fa-file-invoice-dollar icon"></i>
                            <h3>Proformas</h3>
                            <p>Registrar nueva incidencia - Proformas</p>
                            <!--SUB VISTA: NOMBRE: LISTADO_REGISTRO_INCIDENCIA_PROFORMAS-->
                            <a href="public/logistica/registro_incidencias_proforma.html" class="btn">
                                <i class="fas fa-plus"></i> Registrar Incidencia
                            </a>
                        </div>

                        <div class="menu-card">
                            <i class="fas fa-ship icon"></i>
                            <h3>Importaciones</h3>
                            <p>Registrar nueva incidencia - Importación</p>
                            <!--SUB VISTA: NOMBRE: REGISTRO_INCIDENCIA_IMPORTACION_lOGISTICA-->
                            <a href="#" class="btn" data-apps-script-page="incidencia_logistica_formulario">
                                <i class="fas fa-plus"></i> Crear Incidencia
                            </a>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Sección Listados -->
            <div class="primary-section" id="listados-section">
                <div class="section-header" onclick="toggleSection('listados')">
                    <i class="fas fa-clipboard-list"></i>
                    <h2>Ver Listados</h2>
                    <i class="fas fa-chevron-down toggle-icon"></i>
                </div>
                <div class="section-content" id="listados-content">
                    <div class="menu-grid">
                        <div class="menu-card">
                            <i class="fas fa-exclamation-triangle icon"></i>
                            <h3>Incidencias - Importaciones</h3>
                            <p>Ver todas las incidencias</p>
                            <!--SUB VISTA: NOMBRE: LISTADO_INCIDENCIAS_IMPORTACION-->
                            <a href="public/logistica/incidencia_listado_logistica.html" class="btn">
                                <i class="fas fa-eye"></i> Ver Listado
                            </a>
                        </div>

                        <div class="menu-card">
                            <i class="fas fa-ship icon"></i>
                            <h3>Importaciones</h3>
                            <p>Ver las importaciones</p>
                            <!--SUB VISTA: NOMBRE: LISTADO_IMPORTACIONES_LOGISTICA-->
                            <a href="public/logistica/listado_import.html" class="btn">
                                <i class="fas fa-eye"></i> Ver Listado
                            </a>
                        </div>
                    </div>
                </div>
            </div>
            <!-- Sección Solicitudes/Incidencias -->
            <div class="primary-section" id="soli-section">
                <div class="section-header" onclick="toggleSection('soli')">
                    <i class="fas fa-clipboard-list"></i>
                    <h2>Solicitudes/Incidencias</h2>
                    <i class="fas fa-chevron-down toggle-icon"></i>
                </div>
                <div class="section-content" id="soli-content">
                    <div class="menu-grid">
                        <div class="menu-card">
                            <i class="fas fa-ship icon"></i>
                            <h3>Listado de Solicitudes/Incidencias</h3>
                            <p>Ver y gestionar Solicitudes/Incidencias</p>
                            <a href="public/logistica/soli_inci_general_logistica.html" class="btn">
                                <i class="fas fa-eye"></i> Ver Solicitudes/Incidencias
                            </a>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Logistica -->
            <div class="primary-section" id="inventario-section">
                <div class="section-header" onclick="toggleSection('inventario')">
                    <i class="fas fa-clipboard-list"></i>
                    <h2>Inventario/Conteos</h2>
                    <i class="fas fa-chevron-down toggle-icon"></i>
                </div>
                <div class="section-content" id="inventario-content">
                    <div class="menu-grid">
                        <div class="menu-card">
                            <i class="fas fa-ship icon"></i>
                            <h3>Gestión de Inventario</h3>
                            <p>Ver y Gestionar inventario</p>
                            <a href="https://inventario-sage-one.vercel.app/" class="btn">
                                <i class="fas fa-eye"></i> Entrar a inventario
                            </a>
                        </div>
                    </div>
                </div>
            </div>

        </div>
    </div>

    <script src="js/config.js"></script>
    <script src="js/script.js"></script>
    <script>
        function toggleSection(sectionName) {
            const section = document.getElementById(sectionName + '-section');
            const content = document.getElementById(sectionName + '-content');
            const toggleIcon = section.querySelector('.toggle-icon');

            // Toggle la clase active
            section.classList.toggle('active');

            // Toggle la visibilidad del contenido
            if (content.style.maxHeight) {
                content.style.maxHeight = null;
                toggleIcon.style.transform = 'rotate(0deg)';
            } else {
                content.style.maxHeight = content.scrollHeight + "px";
                toggleIcon.style.transform = 'rotate(180deg)';
            }
        }

        // Abrir la primera sección por defecto y cargar permisos de subvistas
        document.addEventListener('DOMContentLoaded', function () {
            toggleSection('incidencias');
            
            // Cargar y filtrar subvistas según permisos del usuario
            const username = localStorage.getItem("loggedUser");
            if (username && typeof loadAndFilterSubvistas === 'function') {
                loadAndFilterSubvistas(username);
            }
        });
    </script>
</body>

</html>